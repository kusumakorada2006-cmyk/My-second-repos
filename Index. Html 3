<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FreshBasket – Demo Fruit Shop</title>
  <style>
    :root{--bg:#fbfbfb;--card:#ffffff;--muted:#6b7280;--text:#0f172a;--accent:#ef4444;--accent2:#10b981}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#f8fafc,#eef2f7);color:var(--text)}
    .wrap{max-width:1100px;margin:24px auto;padding:16px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:44px;height:44px;border-radius:12px;background:linear-gradient(135deg,var(--accent2),#60a5fa);display:flex;align-items:center;justify-content:center;color:white;font-weight:800}
    .controls{display:flex;gap:8px;align-items:center}
    input[type="search"],select{padding:10px;border-radius:10px;border:1px solid #e5e7eb}
    button{padding:10px 12px;border-radius:10px;border:0;background:var(--accent);color:white;cursor:pointer}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-top:18px}
    @media(max-width:1000px){.grid{grid-template-columns:repeat(3,1fr)}}
    @media(max-width:700px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:420px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card);border-radius:12px;box-shadow:0 6px 18px rgba(16,24,40,0.06);overflow:hidden;display:flex;flex-direction:column}
    .card img{width:100%;height:160px;object-fit:cover}
    .card .body{padding:12px;flex:1;display:flex;flex-direction:column;gap:8px}
    .price{font-weight:700}
    .muted{color:var(--muted);font-size:13px}
    .row{display:flex;align-items:center;justify-content:space-between}
    .cart{position:fixed;right:16px;bottom:16px;background:linear-gradient(180deg,#fff,#f8fafc);padding:10px;border-radius:12px;box-shadow:0 10px 30px rgba(2,6,23,.12);display:flex;gap:12px;align-items:center}
    .count{background:var(--accent2);color:#fff;padding:6px 8px;border-radius:999px;font-weight:700}
    dialog{border:0;border-radius:12px;padding:0;width:90vw;max-width:900px}
    .sheet{display:grid;grid-template-columns:1.6fr 1fr}
    @media(max-width:820px){.sheet{grid-template-columns:1fr}}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px solid #eef2f7;text-align:left}
    .qty{display:flex;gap:8px;align-items:center}
    .chip{background:#f3f4f6;padding:6px 8px;border-radius:8px;font-size:13px}
    footer{text-align:center;color:var(--muted);margin-top:18px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand"><div class="logo">FB</div><div>
        <div style="font-weight:800">FreshBasket</div>
        <div style="font-size:13px;color:var(--muted)">Fresh fruits delivered</div>
      </div></div>

      <div class="controls">
        <input id="q" type="search" placeholder="Search fruits (eg. apple, mango)" />
        <select id="sort"><option value="popular">Most popular</option><option value="price-asc">Price ↑</option><option value="price-desc">Price ↓</option></select>
        <button id="reset">Reset</button>
      </div>
    </header>

    <div id="results" style="margin-top:10px;color:var(--muted)"></div>

    <section id="grid" class="grid"></section>

    <footer>Demo fruit shop — front-end only. Replace images and prices as needed.</footer>
  </div>

  <div class="cart" id="floating">
    <div style="font-weight:700">Cart</div>
    <div class="count" id="cartCount">0</div>
    <button id="open">Open</button>
  </div>

  <dialog id="cartDialog">
    <div class="sheet">
      <div style="padding:18px">
        <h2>Your Cart</h2>
        <div id="cartWrap"></div>
      </div>
      <div style="background:#fafafa;padding:18px;border-left:1px solid #f1f5f9">
        <h3>Checkout</h3>
        <form id="checkout">
          <input class="chip" name="name" placeholder="Full name" required style="width:100%;margin-bottom:8px" />
          <input class="chip" name="phone" placeholder="Phone" required style="width:100%;margin-bottom:8px" />
          <input class="chip" name="address" placeholder="Address" required style="width:100%;margin-bottom:8px" />
          <div id="totals" style="margin-top:12px"></div>
          <button style="width:100%;margin-top:12px;background:var(--accent2);border:0;padding:10px;border-radius:10px;color:#fff">Place Order (Demo)</button>
        </form>
      </div>
    </div>
  </dialog>

  <script>
    const PRODUCTS = [
      {id:1,name:'Alphonso Mango (1 kg)',price:399,img:'https://picsum.photos/seed/mango1/600/400'},
      {id:2,name:'Banana (1 dozen)',price:99,img:'https://picsum.photos/seed/banana1/600/400'},
      {id:3,name:'Red Apple (1 kg)',price:249,img:'https://picsum.photos/seed/apple1/600/400'},
      {id:4,name:'Green Grapes (500 g)',price:199,img:'https://picsum.photos/seed/grapes1/600/400'},
      {id:5,name:'Orange (1 kg)',price:179,img:'https://picsum.photos/seed/orange1/600/400'},
      {id:6,name:'Papaya (per piece)',price:129,img:'https://picsum.photos/seed/papaya1/600/400'},
      {id:7,name:'Pineapple (per piece)',price:199,img:'https://picsum.photos/seed/pine1/600/400'},
      {id:8,name:'Strawberries (250 g)',price:299,img:'https://picsum.photos/seed/straw1/600/400'},
      {id:9,name:'Kiwi (4 pcs)',price:219,img:'https://picsum.photos/seed/kiwi1/600/400'},
      {id:10,name:'Pomegranate (per piece)',price:149,img:'https://picsum.photos/seed/pom1/600/400'}
    ];

    const state = { q:'', sort:'popular', cart: JSON.parse(localStorage.getItem('fresh_cart')||'[]') };
    const el = s=>document.querySelector(s);
    const fmt = n => new Intl.NumberFormat('en-IN',{style:'currency',currency:'INR',maximumFractionDigits:0}).format(n);

    function save(){ localStorage.setItem('fresh_cart', JSON.stringify(state.cart)); renderBadge(); }

    function render(){
      let items = PRODUCTS.slice();
      if(state.q) items = items.filter(p=>p.name.toLowerCase().includes(state.q.toLowerCase()));
      if(state.sort==='price-asc') items.sort((a,b)=>a.price-b.price);
      if(state.sort==='price-desc') items.sort((a,b)=>b.price-a.price);
      el('#results').textContent = `${items.length} items`;
      const g = el('#grid'); g.innerHTML='';
      items.forEach(p=>{
        const card = document.createElement('article'); card.className='card';
        card.innerHTML = `\n          <img src="${p.img}" alt="${p.name}">\n          <div class="body">\n            <div class="row"><div><strong>${p.name}</strong><div class="muted">Fresh &amp; seasonal</div></div><div class="price">${fmt(p.price)}</div></div>\n            <div style=\"display:flex;gap:8px;margin-top:8px\">\n              <button class=\"chip\" data-add=\"${p.id}\">Add</button>\n              <button class=\"chip\" onclick=\"window.alert('Sample info: deliver in 1-2 days')\">Info</button>\n            </div>\n          </div>`;
        g.appendChild(card);
        card.querySelector('[data-add]')?.addEventListener('click',()=>add(p.id));
      });
    }

    function add(id){
      const p = PRODUCTS.find(x=>x.id===id);
      const existing = state.cart.find(i=>i.id===id);
      if(existing) existing.qty += 1; else state.cart.push({id:p.id,name:p.name,price:p.price,qty:1});
      save(); openCart();
    }

    function remove(id){ state.cart = state.cart.filter(i=>i.id!==id); save(); renderCart(); }
    function change(id,delta){ const it = state.cart.find(i=>i.id===id); if(!it) return; it.qty+=delta; if(it.qty<=0) remove(id); else save(); renderCart(); }

    function renderBadge(){ el('#cartCount').textContent = state.cart.reduce((s,i)=>s+i.qty,0); }

    function openCart(){ el('#cartDialog').showModal(); renderCart(); }
    function closeCart(){ el('#cartDialog').close(); }

    function renderCart(){
      const wrap = el('#cartWrap');
      if(state.cart.length===0){ wrap.innerHTML='<div style="padding:20px;color:#6b7280">Your cart is empty.</div>'; updateTotals(); return; }
      const rows = state.cart.map(i=>`<tr><td><strong>${i.name}</strong></td><td>${fmt(i.price)}</td><td><div class='qty'><button onclick="change(${i.id},-1)">−</button><span>${i.qty}</span><button onclick="change(${i.id},1)">+</button></div></td><td>${fmt(i.qty*i.price)}</td><td><button onclick="remove(${i.id})">Remove</button></td></tr>`).join('');
      wrap.innerHTML = `<table><thead><tr><th>Item</th><th>Price</th><th>Qty</th><th>Subtotal</th><th></th></tr></thead><tbody>${rows}</tbody></table>`;
      updateTotals();
    }

    function updateTotals(){
      const mrp = state.cart.reduce((s,i)=>s+i.qty*i.price,0);
      const delivery = mrp>500?0:49;
      const total = mrp + (mrp?delivery:0);
      el('#totals').innerHTML = `\n        <div style="display:flex;justify-content:space-between"><span>Items</span><strong>${fmt(mrp)}</strong></div>\n        <div style="display:flex;justify-content:space-between"><span>Delivery</span><strong>${fmt(mrp?delivery:0)}</strong></div>\n        <div style="display:flex;justify-content:space-between;border-top:1px solid #eee;padding-top:8px"><span>Total</span><strong>${fmt(total)}</strong></div>`;
    }

    // events
    el('#q').addEventListener('keydown',e=>{ if(e.key==='Enter'){ state.q = e.target.value.trim(); render(); } });
    el('#sort').addEventListener('change',e=>{ state.sort = e.target.value; render(); });
    el('#reset').addEventListener('click',()=>{ state.q=''; el('#q').value=''; state.sort='popular'; el('#sort').value='popular'; render(); });
    el('#open').addEventListener('click',openCart);
    el('#checkout').addEventListener('submit',e=>{ e.preventDefault(); if(state.cart.length===0){ alert('Cart empty'); return; } alert('Order placed (demo)'); state.cart=[]; save(); render(); closeCart(); });

    // init
    render(); renderBadge();
  </script>
</body>
